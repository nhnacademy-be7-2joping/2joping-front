<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <!-- Pretendard Variable 불러오기 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/default-layout.css}">
    <title>주문 레이아웃</title>

    <style>

    </style>
</head>
<body>
<!-- 공통 Navigation Bar -->
<nav class="navbar" id="navbar">
    <div class="navbar-container">
        <div id="error-container"
             th:if="${errorCode != null and errorMessage != null}"
             th:attr="data-error-code=${errorCode}, data-error-message=${errorMessage}">
        </div>
        <!-- 로고 -->
        <a class="navbar-brand" href="/">
            <img th:src="@{/images/logo.png}" alt="logo" width="200"/>
        </a>

        <!-- 네비게이션 항목 -->
        <div class="navbar-links">
            <a class="nav-link" href="/books/search?keyword=&sort=popularity">베스트</a>
            <a class="nav-link" href="/books/search?keyword=&sort=newest">신상품</a>
            <a class="nav-link" href="/books/search?keyword=&sort=rating">평점순</a>
            <a class="nav-link" href="/books/search?keyword=&sort=reviews">리뷰순</a>
        </div>

        <!-- 검색 바 -->
        <div class="navbar-search">
            <form action="/books/search" method="get">
                <input type="text" name="keyword" placeholder="검색어를 입력하세요" th:value="${keyword}">
                <button type="submit" class="btn btn-primary">검색</button>
            </form>
        </div>
        <div class="navbar-cart">
            <a href="/cart" class="cart-icon">
                <?xml version="1.0" ?>
                <svg enable-background="new 0 0 128 128" id="Layer_1" version="1.1" viewBox="0 0 128 128"
                     xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="89" cy="101" fill="none" r="8" stroke="#00AEEF" stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-miterlimit="10" stroke-width="4"/>
                    <circle cx="49" cy="101" fill="none" r="8" stroke="#00AEEF" stroke-linecap="round"
                            stroke-linejoin="round" stroke-miterlimit="10" stroke-width="4"/>
                    <path d="M29,33h83.0800705c2.8071136,0,4.7410736,2.8159065,3.7333832,5.4359169L99.8765564,79.8718338 C98.6882782,82.9613724,95.7199707,85,92.4097977,85H45.6081238c-3.8357391,0-7.1316795-2.722496-7.8560524-6.4892197L29,33z"
                          fill="none" stroke="#00AEEF" stroke-linecap="round" stroke-linejoin="round"
                          stroke-miterlimit="10" stroke-width="4"/>
                    <path d="M28.9455147,33.0107765l-1.5162468-7.5799599C26.6812878,21.6915436,23.3980236,19,19.5846729,19h-7.2409086"
                          fill="none" stroke="#00AEEF" stroke-linecap="round" stroke-linejoin="round"
                          stroke-miterlimit="10" stroke-width="4"/>
                    <line fill="none" stroke="#00AEEF" stroke-linecap="round" stroke-linejoin="round"
                          stroke-miterlimit="10" stroke-width="4" x1="89.9039841" x2="92.9041901" y1="45" y2="45"/>
                    <line fill="none" stroke="#00AEEF" stroke-linecap="round" stroke-linejoin="round"
                          stroke-miterlimit="10" stroke-width="4" x1="32" x2="80.9041901" y1="45" y2="45"/>
                     </svg>
            </a>
        </div>
        <!-- 사용자 정보 UI -->
        <div class="navbar-actions">
            <!-- 로그인 상태일 때 보이는 코드 -->
            <div th:if="${isLogin}">

                <div class="user-profile-container">
                    <div class="user-profile-image-container">
                        <img th:src="${userProfile != null and userProfile.imageUrl != null and !#strings.isEmpty(userProfile.imageUrl) ? userProfile.imageUrl : '/images/profile-default-image.png'}"
                             alt="회원 사진" class="profile-image"/>
                    </div>

                    <span class="user-name"
                          th:text="${isLogin ? memberNickname + ' 님' : '홍길동 님'}">
                    </span>

                    <!-- 선택 창 박스 -->
                    <div class="profile-dropdown-menu hidden">
                        <a href="/mypage">마이페이지</a>
                        <a href="/mypage/my-like">내 좋아요</a>
                        <a href="/logout">로그아웃</a>
                    </div>
                </div>


            </div>

            <!-- 로그인 상태가 아닐 때 보이는 코드 -->
            <div th:unless="${isLogin}">
                <a href="/login" class="nav-action-link">로그인</a>
                <span class="separator">|</span> <!-- 경계선 -->
                <a href="/signup" class="nav-action-link">회원가입</a>
            </div>
        </div>


    </div>
</nav>


<!-- 콘텐츠 영역 (동적으로 변경됨) -->
<main class="page-layout">

    <!-- 중앙 컨테이너 -->
    <div layout:fragment="content">
        <!-- 각 페이지에서 여기를 채움 -->

    </div>

</main>

<!-- 공통 푸터 -->
<footer class="footer">
    <div class="footer-container">
        <p>NHN Academy</p>
    </div>
</footer>

<div layout:fragment="script"></div>
<script th:src="@{/js/mypage-script.js}"></script>
<script th:src="@{/js/profile-drop-down.js}"></script>
<script th:src="@{/js/error-alert.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossOrigin="anonymous"></script>
</body>
</html>