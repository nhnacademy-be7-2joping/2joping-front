<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>리뷰 등록</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/review-star-style.css}">
  <link rel="stylesheet" th:href="@{/css/review-register-style.css}">
  <script th:src="@{/js/review-rating-star.js}" defer></script>
</head>
<body>
<div class="container">
  <h1>리뷰 등록</h1>
  <form th:action="@{/reviews}" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
    <!-- 주문 상세 ID -->
    <div class="mb-3">
      <input type="hidden" id="orderDetailId" name="orderDetailId" th:value="${orderDetailId}">
    </div>


    <!-- 평점 -->
    <div class="mb-3">
      <label for="ratingValue">평점:</label>
      <div class="stars">
        <span class="star" onclick="setRating(1)">★</span>
        <span class="star" onclick="setRating(2)">★</span>
        <span class="star" onclick="setRating(3)">★</span>
        <span class="star" onclick="setRating(4)">★</span>
        <span class="star" onclick="setRating(5)">★</span>
      </div>
      <input type="hidden" id="ratingValue" name="ratingValue" required> <!-- 실제 값 저장용 -->
    </div>

    <!-- 리뷰 제목 -->
    <div class="mb-3">
      <label for="title">리뷰 제목:</label>
      <input type="text" id="title" name="title" required>
    </div>

    <!-- 리뷰 내용 -->
    <div class="mb-3">
      <label for="text">리뷰 내용:</label>
      <textarea id="text" name="text" rows="4" required></textarea>
    </div>

    <!-- 이미지 업로드 -->
    <div class="mb-3">
      <label for="reviewImage">이미지 업로드:</label>
      <input type="file" id="reviewImage" name="reviewImage" accept="image/*">
    </div>

    <!-- 제출 버튼 -->
    <button type="submit">등록</button>
  </form>
</div>

<script>
  function validateForm() {
    const ratingValue = document.getElementById('ratingValue').value;
    if (!ratingValue || ratingValue === "0") {
      alert("평점을 입력해주세요.");
      return false; // 제출 중지
    }
    return true; // 제출 진행
  }
</script>

</body>
</html>
