<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>배송 정책 추가/수정</title>
    <script>
        // 폼 유효성 검사
        function validateForm() {
            const minOrderAmount = document.getElementById("minOrderAmount").value;
            const shippingFee = document.getElementById("shippingFee").value;

            if (minOrderAmount <= 0) {
                alert("최소 주문 금액을 올바르게 입력하세요.");
                return false;
            }

            if (shippingFee < 0) {
                alert("배송비는 0 이상이어야 합니다.");
                return false;
            }

            return true;  // 모든 검사를 통과하면 폼이 제출됨
        }
    </script>
</head>
<body>
<h1 th:text="${policy?.shipmentPolicyId == null ? '배송 정책 추가' : '배송 정책 수정'}"></h1>

<!-- 폼 전송 경로 결정: ID가 있으면 수정, 없으면 추가 -->
<form th:action="${policy?.shipmentPolicyId == null ? '/shipment-policies' : '/shipment-policies/' + policy.shipmentPolicyId + '/edit'}"
      th:object="${policy}" method="post" onsubmit="return validateForm()">

    <!-- 정책 이름 필드 -->
    <div>
        <label for="name">정책 이름:</label>
        <input type="text" id="name" th:field="*{name}" required>
    </div>

    <!-- 최소 주문 금액 필드 -->
    <div>
        <label for="minOrderAmount">최소 주문 금액:</label>
        <input type="number" id="minOrderAmount" th:field="*{minOrderAmount}" required min="0">
    </div>

    <!-- 회원 전용 여부 필드 -->
    <div>
        <label for="isMemberOnly">회원 전용:</label>
        <input type="checkbox" id="isMemberOnly" th:field="*{isMemberOnly}">
    </div>

    <!-- 배송비 필드 -->
    <div>
        <label for="shippingFee">배송비:</label>
        <input type="number" id="shippingFee" th:field="*{shippingFee}" required min="0">
    </div>

    <!-- 제출 버튼 -->
    <button type="submit" th:text="${#strings.isEmpty(policy.shipmentPolicyId) ? '추가' : '수정'}"></button>

</form>

<!-- 취소 버튼 -->
<a href="/shipment-policies">목록으로 돌아가기</a>
</body>
</html>
